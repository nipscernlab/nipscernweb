/* ═══════════════════════════════════════════════════════════════
   CGV Web — style.css  v3.0
   Sober Scientific Elegance · NIPSCERN Edition
   Cormorant Garamond Display · Geist UI · JetBrains Mono
═══════════════════════════════════════════════════════════════ */

/* ── Custom Properties ──────────────────────────────────────── */
:root {
  --bg:              #000c1a;
  --prussian:        #003153;
  --prussian-light:  #00456e;
  --prussian-dim:    #001e35;

  --panel-bg:        rgba(0, 20, 40, 0.84);
  --panel-border:    rgba(255, 255, 255, 0.07);
  --panel-border-hi: rgba(0, 160, 210, 0.22);

  --accent:          #0099c4;
  --accent-dim:      rgba(0, 153, 196, 0.12);
  --accent-hover:    #00b8e6;
  --accent-glow:     rgba(0, 180, 230, 0.45);

  --tile-col:        #3dbf9a;
  --hec-col:         #b8863a;
  --lar-col:         #5a9de0;

  --text-primary:    #ddeeff;
  --text-secondary:  rgba(200, 225, 245, 0.68);
  --text-muted:      rgba(160, 195, 220, 0.42);
  --text-data:       #a0d4f0;

  --font-display: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-mono: 'Consolas', 'Monaco', 'Courier New', monospace;

  --r-sm:  5px;
  --r-md:  8px;
  --r-lg:  12px;
  --r-xl:  18px;

  --ease:   cubic-bezier(0.22, 1, 0.36, 1);
  --ease-in: cubic-bezier(0.55, 0, 1, 0.45);
  --t-fast: 0.14s;
  --t-mid:  0.28s;
  --t-slow: 0.44s;
}

/* ── Reset & Base ───────────────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  background: var(--bg);
  color: var(--text-primary);
  font-family: var(--font-ui);
  font-size: 16px;          /* ↑ from 15 */
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

a            { color: inherit; text-decoration: none; }
button       { cursor: pointer; font-family: inherit; border: none; background: none; color: inherit; }
input        { font-family: inherit; }
.mono        { font-family: var(--font-mono); font-size: 0.87em; letter-spacing: -0.01em; }
sub          { font-size: 0.72em; }

kbd {
  font-family: var(--font-mono);
  font-size: 0.78em;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 4px;
  padding: 1px 7px;
}

/* ── Canvas ─────────────────────────────────────────────────── */
#gl-canvas {
  position: fixed; inset: 0;
  display: block;
  width: 100% !important;
  height: 100% !important;
  z-index: 0;
}

#file-input { display: none; }

/* ── Ghost label ─────────────────────────────────────────────── */
#ghost-lbl {
  position: fixed;
  bottom: 30px; left: 50%;
  transform: translateX(-50%);
  z-index: 100;
  text-align: center;
  pointer-events: none;
  transition: opacity var(--t-mid) ease;
}
#ghost-lbl.gone { opacity: 0; }

.ghost-title {
  display: block;
  font-family: var(--font-display);
  font-size: 1.2rem;
  font-weight: 600;
  letter-spacing: 0.02em;
  color: rgba(0, 160, 210, 0.35);
}
.ghost-sub {
  display: block;
  font-size: 0.8rem;
  color: rgba(0, 150, 200, 0.22);
  margin-top: 5px;
  letter-spacing: 0.01em;
}

/* ═══════════════════════════════════════════════════════════════
   DROP ZONE
═══════════════════════════════════════════════════════════════ */
#drop-zone {
  position: fixed; inset: 0; z-index: 20;
  display: flex; align-items: center; justify-content: center;
  background: rgba(0, 8, 18, 0.58);
  backdrop-filter: blur(4px);
  transition: opacity var(--t-mid) ease, visibility var(--t-mid) ease;
}
#drop-zone.hidden { opacity: 0; pointer-events: none; visibility: hidden; }
#drop-zone.drag-over .dz-inner {
  border-color: var(--accent);
  background: rgba(0, 153, 196, 0.07);
  /*box-shadow: 0 0 0 3px rgba(0, 153, 196, 0.12), 0 24px 64px rgba(0,0,0,0.6);*/
}

.dz-inner {
  width: 460px; max-width: 92vw;
  padding: 52px 44px 44px;
  background: var(--panel-bg);
  border: 1px solid var(--panel-border-hi);
  border-radius: var(--r-xl);
  backdrop-filter: blur(24px);
  text-align: center;
  animation: fadeUp var(--t-slow) var(--ease) both;
  box-shadow: 0 24px 72px rgba(0,0,0,0.55);
}

.dz-symbol {
  font-family: var(--font-display);
  font-size: 3.4rem;
  color: var(--accent);
  opacity: 0.55;
  line-height: 1;
  margin-bottom: 22px;
}

.dz-headline {
  font-family: var(--font-display);
  font-size: 2.1rem;
  font-weight: 600;
  letter-spacing: 0.02em;
  margin-bottom: 13px;
  color: var(--text-primary);
}

.dz-sub {
  font-size: 0.92rem;
  color: var(--text-secondary);
  line-height: 1.68;
  margin-bottom: 30px;
  max-width: 360px;
  margin-left: auto; margin-right: auto;
}

.dz-actions {
  display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;
  margin-bottom: 22px;
}

.dz-formats { font-size: 0.76rem; color: var(--text-muted); }
.dz-formats code { font-family: var(--font-mono); color: var(--accent); }

/* ── Buttons ─────────────────────────────────────────────────── */
.btn-primary {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 11px 24px;
  background: var(--accent);
  color: #fff;
  font-size: 0.92rem;
  font-weight: 600;
  letter-spacing: 0.02em;
  border-radius: var(--r-md);
  transition: background var(--t-fast), transform var(--t-fast), box-shadow var(--t-fast);
}
.btn-primary:hover { background: var(--accent-hover); transform: translateY(-1px); box-shadow: 0 6px 20px rgba(0,153,196,0.3); }
.btn-primary:active { transform: none; box-shadow: none; }

.btn-ghost {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 11px 24px;
  background: transparent;
  border: 1px solid var(--panel-border-hi);
  color: var(--text-secondary);
  font-size: 0.92rem;
  font-weight: 500;
  border-radius: var(--r-md);
  transition: border-color var(--t-fast), color var(--t-fast), background var(--t-fast);
}
.btn-ghost:hover { border-color: var(--accent); color: var(--accent); background: var(--accent-dim); }

/* ═══════════════════════════════════════════════════════════════
   LOADING BAR
═══════════════════════════════════════════════════════════════ */
#loading-bar { position: fixed; top: 0; left: 0; right: 0; z-index: 100; display: none; }
#loading-bar.active { display: block; }

.lb-inner { padding: 10px 22px 13px; background: var(--panel-bg); border-bottom: 1px solid var(--panel-border); }
.lb-label {
  display: block; margin-bottom: 6px;
  font-family: var(--font-mono); font-size: 0.72rem;
  letter-spacing: 0.02em; text-transform: uppercase;
  color: var(--accent);
}
.lb-track { height: 2px; background: rgba(0, 153, 196, 0.12); border-radius: 2px; overflow: hidden; }
.lb-fill  { height: 100%; width: 0%; background: var(--accent); border-radius: 2px; transition: width 0.3s var(--ease); }

/* ... */
   TOAST
═══════════════════════════════════════════════════════════════ */
#toast {
  position: fixed; bottom: 24px; left: 50%;
  transform: translateX(-50%) translateY(16px);
  z-index: 90;
  display: flex; align-items: center; gap: 10px;
  padding: 10px 20px;
  background: var(--panel-bg);
  border: 1px solid var(--panel-border-hi);
  border-radius: 100px;
  backdrop-filter: blur(20px);
  font-size: 0.87rem;
  white-space: nowrap;
  opacity: 0; pointer-events: none;
  transition: opacity var(--t-mid) ease, transform var(--t-mid) var(--ease);
}
#toast.on { opacity: 1; transform: translateX(-50%) translateY(0); pointer-events: auto; }

.toast-pip { width: 7px; height: 7px; border-radius: 50%; background: var(--text-muted); flex-shrink: 0; }
.toast-pip.live { background: var(--accent); animation: pulse 1.4s ease-in-out infinite; }
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.35; } }

/* ═══════════════════════════════════════════════════════════════
   CELL TOOLTIP
═══════════════════════════════════════════════════════════════ */
#cell-tooltip {
  position: fixed; z-index: 80; pointer-events: none;
  padding: 14px 16px;
  background: rgba(0, 14, 28, 0.97);
  border: 1px solid var(--panel-border-hi);
  border-radius: var(--r-md);
  backdrop-filter: blur(20px);
  min-width: 196px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.5);
  opacity: 0; transform: scale(0.96) translateY(4px);
  transition: opacity var(--t-fast) ease, transform var(--t-fast) var(--ease);
}
#cell-tooltip.visible { opacity: 1; transform: scale(1) translateY(0); }

.ct-header {
  display: flex; align-items: center; gap: 6px;
  font-family: var(--font-display);
  font-size: 0.88rem; font-weight: 600;
  letter-spacing: 0.08em; text-transform: uppercase;
  color: var(--accent);
  margin-bottom: 11px; padding-bottom: 9px;
  border-bottom: 1px solid var(--panel-border);
}
.ct-rows { display: flex; flex-direction: column; gap: 7px; }
.ct-row  { display: flex; justify-content: space-between; align-items: baseline; gap: 14px; }
.ct-label { font-size: 0.78rem; color: var(--text-muted); flex-shrink: 0; }
.ct-val   { font-size: 0.83rem; font-weight: 500; color: var(--text-data); }

/* ═══════════════════════════════════════════════════════════════
   SLIDER TIP
═══════════════════════════════════════════════════════════════ */
#slider-tip {
  position: fixed; z-index: 85; pointer-events: none;
  padding: 9px 13px;
  background: rgba(0, 14, 28, 0.97);
  border: 1px solid var(--panel-border-hi);
  border-radius: var(--r-sm);
  backdrop-filter: blur(16px);
  opacity: 0; transition: opacity var(--t-fast) ease;
}
#slider-tip.on { opacity: 1; }
.tip-val { font-family: var(--font-mono); font-size: 0.83rem; color: var(--accent); }
.tip-pct { font-size: 0.72rem; color: var(--text-muted); margin-top: 2px; }

/* ═══════════════════════════════════════════════════════════════
   HUD
═══════════════════════════════════════════════════════════════ */
#hud { position: fixed; inset: 0; z-index: 30; pointer-events: none; }
#hud > * { pointer-events: auto; }

/* Smooth focus-mode fade for all HUD elements */
#left-panel, #energy-rail, #top-bar, #ghost-lbl, #toast, #drop-zone {
  transition: opacity var(--t-slow) ease;
}
body.focus-mode #left-panel,
body.focus-mode #energy-rail,
body.focus-mode #top-bar,
body.focus-mode #ghost-lbl,
body.focus-mode #toast,
body.focus-mode #drop-zone {
  opacity: 0;
  pointer-events: none;
}

/* ── Top Bar ─────────────────────────────────────────────────── */
#top-bar {
  position: absolute; top: 0; left: 0; right: 0;
  height: 54px;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0 20px;
  background: linear-gradient(to bottom, rgba(0, 8, 18, 0.96) 0%, rgba(0, 8, 18, 0.0) 100%);
  border-bottom: 1px solid rgba(255,255,255,0.035);
  gap: 14px;
  animation: fadeDown var(--t-slow) var(--ease) both;
}

.tb-left { display: flex; align-items: center; flex-shrink: 0; }

.tb-logo { display: flex; align-items: center; gap: 11px; }
.tb-wordmark {
  font-family: var(--font-display);
  font-size: 1.75rem;
  font-weight: 700;            /* assertive */
  letter-spacing: 0.07em;
  color: var(--accent);
  line-height: 1;
}
.tb-brand { display: flex; flex-direction: column; }
.tb-brand-title {
  font-size: 0.84rem;
  font-weight: 600;            /* thicker */
  color: var(--text-primary);
  letter-spacing: 0.01em;
  line-height: 1.2;
}
.tb-brand-sub {
  font-size: 0.7rem;
  color: var(--text-muted);
  letter-spacing: 0.03em;
  line-height: 1.2;
}

/* Filename pill */
.tb-filename {
  display: flex; align-items: center; gap: 7px;
  padding: 5px 14px;
  background: rgba(0,153,196,0.07);
  border: 1px solid rgba(0,153,196,0.16);
  border-radius: 100px;
  max-width: 260px;
  transition: opacity var(--t-mid) ease, width var(--t-mid) ease;
  flex-shrink: 1;
  min-width: 0;
}
.tb-filename.hidden { opacity: 0; pointer-events: none; max-width: 0; padding: 0; border: none; overflow: hidden; }
.fn-text { font-size: 0.78rem; color: var(--text-secondary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

/* Top bar actions */
.tb-actions { display: flex; align-items: center; gap: 2px; flex-shrink: 0; }
.tb-link-group { display: flex; gap: 0; margin-right: 4px; }
.tb-sep { width: 1px; height: 22px; background: rgba(255,255,255,0.07); margin: 0 6px; flex-shrink: 0; }

.tb-text-link {
  padding: 6px 10px;
  font-size: 0.72rem; font-weight: 700;
  letter-spacing: 0.1em; text-transform: uppercase;
  color: var(--text-muted);
  border-radius: var(--r-sm);
  transition: color var(--t-fast), background var(--t-fast);
}
.tb-text-link:hover { color: var(--accent); background: var(--accent-dim); }

/* Icon button — base */
.tb-icon-btn {
  width: 36px; height: 36px;
  display: flex; align-items: center; justify-content: center;
  border-radius: var(--r-md);
  color: var(--text-muted);
  transition: background var(--t-fast), color var(--t-fast);
}
.tb-icon-btn:hover { background: rgba(255,255,255,0.06); color: var(--text-primary); }
.tb-btn-accent:hover { color: var(--accent); background: rgba(0,153,196,0.1); }
.tb-btn-danger:hover { color: #d46060; background: rgba(180,60,60,0.08); }
.tb-icon-btn.flash { animation: snap-flash 0.6s ease; }
@keyframes snap-flash { 30% { background: rgba(0,153,196,0.18); color: var(--accent); } }

/* ── Button tooltip wrapper ──────────────────────────────────── */
.tb-btn-wrap {
  position: relative;
}
.tb-tooltip {
  position: absolute; top: calc(100% + 10px); right: 0;
  width: 195px;
  background: rgba(0, 12, 26, 0.98);
  border: 1px solid var(--panel-border-hi);
  border-radius: var(--r-md);
  backdrop-filter: blur(20px);
  padding: 10px 13px;
  pointer-events: none;
  opacity: 0; transform: translateY(-4px) scale(0.97);
  transition: opacity var(--t-fast) var(--ease), transform var(--t-fast) var(--ease);
  z-index: 200;
  white-space: normal;
  box-shadow: 0 8px 28px rgba(0,0,0,0.55);
}
.tb-tooltip::before {
  content: '';
  position: absolute; top: -5px; right: 14px;
  width: 9px; height: 9px;
  background: rgba(0, 12, 26, 0.98);
  border-top: 1px solid var(--panel-border-hi);
  border-left: 1px solid var(--panel-border-hi);
  transform: rotate(45deg);
}
.tb-btn-wrap:hover .tb-tooltip {
  opacity: 1; transform: translateY(0) scale(1);
}
.tb-tt-title {
  display: block;
  font-size: 0.8rem; font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}
.tb-tt-desc {
  display: block;
  font-size: 0.75rem;
  color: var(--text-muted);
  line-height: 1.55;
}
.tb-tt-desc kbd {
  font-size: 0.72em;
  background: rgba(255,255,255,0.06);
  border-color: rgba(255,255,255,0.12);
  padding: 0 5px;
}

/* ── Left Panel ──────────────────────────────────────────────── */
#left-panel {
  position: absolute; top: 62px; left: 16px;
  width: 244px;
  display: flex; flex-direction: column; gap: 8px;
  animation: fadeLeft var(--t-slow) 0.08s var(--ease) both;
  max-height: calc(100vh - 82px);
  overflow-y: auto; scrollbar-width: none;
}
#left-panel::-webkit-scrollbar { display: none; }

/* Panel cards */
.panel-card {
  background: var(--panel-bg);
  border: 1px solid var(--panel-border);
  border-radius: var(--r-lg);
  backdrop-filter: blur(20px);
  overflow: hidden;
}

/* Collapsible panel header */
.panel-card-hdr {
  padding: 11px 15px;
  font-family: var(--font-display);
  font-size: 0.82rem; font-weight: 700;
  letter-spacing: 0.09em; text-transform: uppercase;
  color: var(--text-secondary);
  border-bottom: 1px solid var(--panel-border);
}
.collapsible-hdr {
  width: 100%;
  display: flex; align-items: center; justify-content: space-between;
  cursor: pointer;
  transition: background var(--t-fast);
}
.collapsible-hdr:hover { background: rgba(255,255,255,0.025); }
.collapsible-hdr[aria-expanded="false"] #meta-chevron { transform: rotate(180deg); }

/* Metadata body */
.meta-body {
  overflow: hidden;
  max-height: 300px;
  transition: max-height var(--t-mid) var(--ease);
}
.meta-body.collapsed { max-height: 0; }

.meta-rows { padding: 11px 15px; display: flex; flex-direction: column; gap: 7px; }
.meta-row {
  display: flex;
  justify-content: space-between;
  align-items: baseline;
  gap: 8px;
  flex-wrap: nowrap;
}
.meta-row--wrap { flex-wrap: wrap; gap: 4px; }
.meta-label { font-size: 0.78rem; color: var(--text-muted); flex-shrink: 0; white-space: nowrap; }
.meta-val   { font-size: 0.8rem; color: var(--text-data); text-align: right; }
.meta-val--wrap { text-align: right; word-break: break-word; line-height: 1.45; }

/* Geometry panel */
.gp-toggle {
  width: 100%; display: flex; align-items: center; gap: 8px;
  padding: 11px 15px; text-align: left;
  transition: background var(--t-fast);
}
.gp-toggle:hover { background: rgba(255,255,255,0.03); }
.gp-title {
  font-family: var(--font-display);
  font-size: 0.82rem; font-weight: 700;
  letter-spacing: 0.09em; text-transform: uppercase;
  color: var(--text-secondary); flex: 1;
}
.gp-chevron { color: var(--text-muted); transition: transform var(--t-mid); flex-shrink: 0; }
.gp-toggle.collapsed .gp-chevron { transform: rotate(180deg); }

#gp-body { overflow: hidden; max-height: 700px; transition: max-height var(--t-mid) var(--ease); }
#gp-body.collapsed { max-height: 0; }

.gp-section {
  padding: 11px 15px 13px;
  border-top: 1px solid var(--panel-border);
}
.gp-section-label {
  display: flex; align-items: center; gap: 6px;
  font-size: 0.72rem; letter-spacing: 0.09em;
  text-transform: uppercase; color: var(--text-muted);
  margin-bottom: 10px;
}
.gp-val { color: var(--accent); margin-left: auto; font-size: 0.78rem; font-family: var(--font-mono); }

/* Sub-detector toggles */
.det-toggles { display: flex; flex-direction: column; gap: 5px; }
.det-toggle  { display: flex; align-items: center; cursor: pointer; }
.det-toggle input { display: none; }

.det-pill {
  width: 100%; padding: 8px 12px;
  border-radius: var(--r-sm);
  border: 1px solid transparent;
  font-size: 0.83rem; font-weight: 500;
  display: flex; align-items: center; gap: 9px;
  transition: background var(--t-fast), border-color var(--t-fast), opacity var(--t-fast);
}
.det-dot {
  width: 7px; height: 7px;
  border-radius: 50%; flex-shrink: 0;
}
.det-tile { color: var(--tile-col); background: rgba(61,191,154,0.07); border-color: rgba(61,191,154,0.15); }
.det-tile .det-dot { background: var(--tile-col); box-shadow: 0 0 6px rgba(61,191,154,0.5); }
.det-hec  { color: var(--hec-col);  background: rgba(184,134,58,0.07);  border-color: rgba(184,134,58,0.15); }
.det-hec .det-dot  { background: var(--hec-col);  box-shadow: 0 0 6px rgba(184,134,58,0.5); }
.det-lar  { color: var(--lar-col);  background: rgba(90,157,224,0.07);  border-color: rgba(90,157,224,0.15); }
.det-lar .det-dot  { background: var(--lar-col);  box-shadow: 0 0 6px rgba(90,157,224,0.5); }
.det-toggle input:not(:checked) + .det-pill { opacity: 0.28; border-color: transparent; background: transparent; }

/* ── Z-Axis Slice — redesigned ──────────────────────────────── */
.zslice-wrapper { display: flex; flex-direction: column; gap: 8px; }
.zslice-track-row {
  display: flex; align-items: center; gap: 7px;
}
.zslice-icon-z {
  font-family: var(--font-mono); font-size: 0.62rem;
  color: var(--text-muted); flex-shrink: 0;
  min-width: 18px; text-align: center;
}
.zslice-bar-wrap { flex: 1; display: flex; flex-direction: column; gap: 4px; }
.zslice-labels {
  display: flex; justify-content: space-between;
  font-size: 0.62rem; color: var(--text-muted); letter-spacing: 0.05em;
}

.clip-track {
  position: relative; height: 6px;
  background: rgba(255,255,255,0.06); border-radius: 6px;
  overflow: visible;
}
.clip-fill {
  position: absolute; inset: 0; right: auto;
  background: linear-gradient(90deg, rgba(0,60,100,0.7) 0%, var(--accent) 100%);
  border-radius: 6px; pointer-events: none;
  transition: width 0.05s linear;
  width: 100%;
}
.clip-slider {
  position: absolute; inset: -4px; width: 100%; height: calc(100% + 8px);
  opacity: 0; cursor: ew-resize; z-index: 2;
}

/* Depth indicator — schematic view showing how deep the slice is */
.zslice-depth-indicator {
  position: relative; height: 12px;
  background: rgba(0,30,55,0.6);
  border: 1px solid var(--panel-border);
  border-radius: 3px; overflow: hidden;
}
.zdi-bar {
  position: absolute; top: 0; bottom: 0; left: 50%;
  transform: translateX(-50%);
  background: linear-gradient(90deg,
    rgba(0,153,196,0.08) 0%, rgba(0,153,196,0.22) 50%, rgba(0,153,196,0.08) 100%);
  border-radius: 2px;
  width: 100%;
  transition: width 0.07s linear;
}

/* Mode buttons */
.mode-btns { display: flex; gap: 6px; }
.mode-btn {
  flex: 1; padding: 7px 10px;
  display: flex; align-items: center; justify-content: center; gap: 6px;
  border: 1px solid var(--panel-border);
  border-radius: var(--r-sm);
  font-size: 0.81rem; color: var(--text-muted);
  transition: background var(--t-fast), border-color var(--t-fast), color var(--t-fast);
}
.mode-btn:hover { border-color: rgba(0,153,196,0.4); color: var(--text-primary); }
.mode-btn.active { border-color: var(--accent); color: var(--accent); background: var(--accent-dim); }

/* ── iOS Toggle Switch ───────────────────────────────────────── */
.scene-toggles { display: flex; flex-direction: column; gap: 10px; }
.scene-toggle-row {
  display: flex; align-items: center; justify-content: space-between; gap: 10px;
}
.scene-toggle-label { font-size: 0.83rem; color: var(--text-secondary); flex: 1; line-height: 1.35; }

.ios-switch {
  position: relative;
  display: inline-block;
  width: 38px; height: 22px;
  flex-shrink: 0; cursor: pointer;
}
.ios-switch input { opacity: 0; width: 0; height: 0; }
.ios-thumb {
  position: absolute; cursor: pointer;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(255,255,255,0.10);
  border: 1px solid rgba(255,255,255,0.14);
  border-radius: 22px;
  transition: background var(--t-mid) ease, border-color var(--t-mid) ease;
}
.ios-thumb::before {
  content: '';
  position: absolute;
  height: 15px; width: 15px;
  left: 3px; bottom: 3px;
  background: var(--text-muted);
  border-radius: 50%;
  transition: transform var(--t-mid) var(--ease), background var(--t-mid) ease;
}
.ios-switch input:checked + .ios-thumb {
  background: rgba(0, 153, 196, 0.22);
  border-color: var(--accent);
}
.ios-switch input:checked + .ios-thumb::before {
  transform: translateX(16px);
  background: var(--accent);
}
.ios-switch input:focus-visible + .ios-thumb {
  outline: 2px solid var(--accent); outline-offset: 2px;
}

/* External links */
.ext-links { display: flex; gap: 13px; padding: 4px 2px; }
.ext-link {
  display: flex; align-items: center; gap: 5px;
  font-size: 0.75rem; color: var(--text-muted);
  transition: color var(--t-fast);
}
.ext-link:hover { color: var(--accent); }

/* ── Right: Energy Rail ──────────────────────────────────────── */
#energy-rail {
  position: absolute; top: 62px; right: 18px; bottom: 30px;
  width: 64px;
  display: flex; flex-direction: column; align-items: center; gap: 8px;
  animation: fadeRight var(--t-slow) 0.08s var(--ease) both;
  /* Base: reduced opacity, brightens on hover */
  opacity: 0.28;
  transition: opacity var(--t-slow) ease;
}
#energy-rail:hover { opacity: 1; }
/* When panel has data, base opacity is slightly higher */
#energy-panel.on ~ * { opacity: 0.7; }

.rail-label-top {
  font-size: 0.72rem; letter-spacing: 0.12em;
  text-transform: uppercase; color: var(--text-muted);
}
.rail-label-top sub { font-size: 0.65em; }

#energy-panel {
  flex: 1; display: flex; flex-direction: column; align-items: center; gap: 8px;
  opacity: 0; transition: opacity var(--t-mid) ease;
}
#energy-panel.on { opacity: 1; }

.ep-val {
  font-size: 0.68rem; color: var(--text-muted);
  writing-mode: vertical-rl; text-orientation: mixed;
}
.ep-max { color: rgba(220, 160, 80, 0.9); }
.ep-min { color: var(--text-muted); }

/* Vibrant neon gradient with subtle glow */
.grad-track {
  flex: 1; width: 20px; position: relative;
  border-radius: 10px; cursor: pointer;
  border: 1px solid rgba(255,255,255,0.08);
  background: linear-gradient(
    to top,
    #ff0040 0%,     /* Neon red */
    #ff4080 15%,    /* Red-pink */
    #ff80c0 30%,    /* Pink */
    #8000ff 45%,    /* Purple */
    #0080ff 60%,    /* Blue */
    #00ffff 75%,    /* Cyan */
    #00ff80 90%,    /* Green-cyan */
    #ffff00 100%    /* Yellow */
  );
  box-shadow:
    0 0 12px 2px rgba(255, 0, 64, 0.3),
    0 0 20px 6px rgba(128, 0, 255, 0.2),
    0 0 30px 10px rgba(0, 128, 255, 0.15),
    inset 0 0 8px rgba(0,0,0,0.4);
  transition: box-shadow var(--t-mid) ease, opacity var(--t-mid) ease;
  opacity: 0.3;
}
#energy-rail:hover .grad-track,
#energy-rail.active .grad-track {
  opacity: 1;
  box-shadow:
    0 0 15px 3px rgba(255, 0, 64, 0.4),
    0 0 25px 8px rgba(128, 0, 255, 0.3),
    0 0 35px 12px rgba(0, 128, 255, 0.2),
    inset 0 0 8px rgba(0,0,0,0.4);
}

.track-dim {
  position: absolute; bottom: 0; left: 0; right: 0;
  background: rgba(0, 8, 18, 0.80);
  border-radius: 10px; height: 0;
  transition: height 0.05s linear;
  pointer-events: none;
}
.track-handle {
  position: absolute; left: 50%; bottom: 0;
  transform: translate(-50%, 50%);
  width: 16px; height: 4px; border-radius: 2px;
  background: linear-gradient(90deg, #ff0040, #0080ff);
  border: 1px solid rgba(255,255,255,0.8);
  cursor: ns-resize; z-index: 2;
  transition: border-color var(--t-fast), box-shadow var(--t-fast), transform var(--t-fast);
  box-shadow: 0 0 10px rgba(255, 0, 64, 0.6);
}
.track-handle:hover,
.track-handle.dragging {
  border-color: #ffffff;
  box-shadow: 0 0 20px rgba(255, 0, 64, 0.9), 0 0 30px rgba(0, 128, 255, 0.6);
  transform: translate(-50%, 50%) scale(1.2);
}
.track-handle:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

.threshold-readout {
  display: flex; flex-direction: column; align-items: center; gap: 2px;
  padding: 8px 7px;
  background: var(--panel-bg); border: 1px solid var(--panel-border);
  border-radius: var(--r-md); backdrop-filter: blur(16px);
  min-width: 64px; text-align: center;
}
.thr-label { font-size: 0.62rem; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-muted); }
.thr-val   { font-size: 0.8rem; color: var(--text-data); }

/* ═══════════════════════════════════════════════════════════════
   FOCUS MODE — complete UI fade with auto-rotation
═══════════════════════════════════════════════════════════════ */
body.focus-mode #hud,
body.focus-mode #ghost-lbl,
body.focus-mode #toast,
body.focus-mode #drop-zone,
body.focus-mode #cell-tooltip,
body.focus-mode #slider-tip,
body.focus-mode #wiki-panel {
  opacity: 0 !important;
  pointer-events: none !important;
  transition: opacity 0.8s ease !important;
}

/* ═══════════════════════════════════════════════════════════════
   FOCUS MODE OVERLAY — smooth fade in/out
═══════════════════════════════════════════════════════════════ */
#focus-overlay {
  position: fixed; inset: 0; z-index: 40;
  display: flex; flex-direction: column;
  align-items: center; justify-content: flex-end;
  padding-bottom: 32px; pointer-events: none;
  opacity: 0;
  transition: opacity var(--t-slow) ease;
}
#focus-overlay.active {
  opacity: 1; pointer-events: auto;
}
#focus-overlay > * { pointer-events: auto; }

.exit-focus-btn {
  display: flex; align-items: center; gap: 10px;
  padding: 10px 24px;
  background: rgba(0, 10, 22, 0.82);
  border: 1px solid rgba(0,153,196,0.24);
  border-radius: 100px;
  backdrop-filter: blur(18px);
  font-size: 0.9rem; color: var(--text-secondary);
  transition: background var(--t-fast), border-color var(--t-fast), color var(--t-fast), transform var(--t-fast);
  animation: fadeUp 0.36s var(--ease);
}
.exit-focus-btn:hover {
  background: rgba(0, 20, 42, 0.96);
  border-color: var(--accent); color: var(--accent);
  transform: translateY(-1px);
}

.focus-hint {
  margin-top: 9px; font-size: 0.72rem;
  color: rgba(160,195,220,0.32); letter-spacing: 0.06em;
}

/* ═══════════════════════════════════════════════════════════════
   WIKI PANEL
═══════════════════════════════════════════════════════════════ */
#wiki-panel {
  position: fixed; top: 0; right: 0; bottom: 0; width: 375px;
  z-index: 50;
  background: rgba(0, 14, 28, 0.97);
  border-left: 1px solid var(--panel-border);
  backdrop-filter: blur(26px);
  display: flex; flex-direction: column;
  transform: translateX(100%);
  transition: transform var(--t-slow) var(--ease);
  overflow: hidden;
}
#wiki-panel.open { transform: translateX(0); }

.wiki-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 16px 20px;
  border-bottom: 1px solid var(--panel-border);
  flex-shrink: 0;
}
.wiki-title {
  display: flex; align-items: center; gap: 8px;
  font-family: var(--font-display);
  font-size: 1rem; font-weight: 700;
  letter-spacing: 0.07em; text-transform: uppercase;
  color: var(--accent);
}
.wiki-close {
  width: 28px; height: 28px;
  display: flex; align-items: center; justify-content: center;
  border-radius: var(--r-sm);
  color: var(--text-muted);
  transition: background var(--t-fast), color var(--t-fast);
}
.wiki-close:hover { background: rgba(255,255,255,0.05); color: var(--text-primary); }

.wiki-tabs {
  display: flex; padding: 10px 16px 0; gap: 2px;
  border-bottom: 1px solid var(--panel-border); flex-shrink: 0;
}
.wiki-tab {
  padding: 7px 13px 10px;
  font-size: 0.8rem; font-weight: 500;
  color: var(--text-muted);
  border-bottom: 2px solid transparent;
  border-radius: var(--r-sm) var(--r-sm) 0 0;
  transition: color var(--t-fast), border-color var(--t-fast), background var(--t-fast);
}
.wiki-tab:hover  { color: var(--text-secondary); background: rgba(255,255,255,0.025); }
.wiki-tab.active { color: var(--accent); border-bottom-color: var(--accent); }

.wiki-content {
  flex: 1; overflow-y: auto; position: relative;
  scrollbar-width: thin;
  scrollbar-color: rgba(0,153,196,0.18) transparent;
}
.wiki-content::-webkit-scrollbar { width: 4px; }
.wiki-content::-webkit-scrollbar-thumb { background: rgba(0,153,196,0.18); border-radius: 4px; }

/* Tab pane switch — fade animation */
.wiki-pane {
  display: block; padding: 22px;
  position: absolute; inset: 0;
  opacity: 0; pointer-events: none;
  transition: opacity var(--t-mid) ease;
  overflow-y: auto;
  scrollbar-width: none;
}
.wiki-pane::-webkit-scrollbar { display: none; }
.wiki-pane.active {
  opacity: 1; pointer-events: auto;
  position: relative;
}

.wiki-pane-title {
  font-family: var(--font-display);
  font-size: 1.5rem; font-weight: 700;
  line-height: 1.2; margin-bottom: 15px;
  color: var(--text-primary);
}
.wiki-para {
  font-size: 0.87rem; color: var(--text-secondary);
  line-height: 1.72; margin-bottom: 11px;
}
.wiki-link {
  display: inline-flex; align-items: center; gap: 4px;
  font-size: 0.83rem; color: var(--accent);
  transition: color var(--t-fast);
}
.wiki-link:hover { color: var(--accent-hover); text-decoration: underline; }

.wiki-link-row { display: flex; gap: 8px; flex-wrap: wrap; }
.wiki-chip {
  display: inline-flex; align-items: center; gap: 5px;
  padding: 5px 12px;
  border: 1px solid rgba(0,153,196,0.25);
  border-radius: 100px;
  font-size: 0.78rem; color: var(--accent);
  transition: background var(--t-fast), border-color var(--t-fast);
}
.wiki-chip:hover { background: var(--accent-dim); border-color: var(--accent); }

.ref-link { color: var(--accent); font-size: 0.72em; vertical-align: super; }
.ref-link:hover { text-decoration: underline; }

/* Branches */
.wiki-tree  { margin-top: 18px; display: flex; flex-direction: column; gap: 6px; }
.branch     { border: 1px solid var(--panel-border); border-radius: var(--r-md); overflow: hidden; }
.branch-header {
  width: 100%; display: flex; align-items: center; gap: 10px;
  padding: 11px 15px;
  background: rgba(0,20,40,0.4);
  font-size: 0.85rem; font-weight: 500; color: var(--text-secondary); text-align: left;
  transition: background var(--t-fast), color var(--t-fast);
}
.branch-header:hover { background: rgba(0,30,55,0.65); color: var(--text-primary); }
.branch-header span  { flex: 1; }
.branch-arrow-icon { color: var(--text-muted); transition: transform var(--t-mid); flex-shrink: 0; }
.branch-header[aria-expanded="true"] .branch-arrow-icon { transform: rotate(180deg); }

.branch-body {
  overflow: hidden; max-height: 0;
  transition: max-height 0.3s var(--ease);
  border-top: 1px solid transparent;
}
.branch-body.open {
  max-height: 800px;
  border-top-color: var(--panel-border);
}
.branch-text {
  font-size: 0.84rem; color: var(--text-secondary);
  line-height: 1.7; padding: 13px 15px 7px;
}
.branch-list {
  padding: 9px 15px 13px 30px;
  font-size: 0.84rem; color: var(--text-secondary);
  line-height: 1.7; display: flex; flex-direction: column; gap: 5px;
}

.wiki-table, .shortcut-table { width: 100%; border-collapse: collapse; }
.wiki-table td, .shortcut-table td {
  padding: 8px 10px; font-size: 0.83rem;
  border-bottom: 1px solid var(--panel-border);
  color: var(--text-secondary);
}
.wiki-table td:first-child, .shortcut-table td:first-child {
  color: var(--text-data); white-space: nowrap;
  font-family: var(--font-mono); font-size: 0.79rem;
}

.spec-grid {
  display: grid; grid-template-columns: 1fr 1fr; gap: 5px;
  padding: 10px 15px;
}
.spec-item {
  background: rgba(0,15,30,0.55); border-radius: var(--r-sm);
  padding: 8px 10px; display: flex; flex-direction: column; gap: 2px;
}
.spec-k { font-size: 0.68rem; color: var(--text-muted); letter-spacing: 0.04em; }
.spec-v { font-family: var(--font-mono); font-size: 0.8rem; color: var(--accent); }

/* Sponsor grid */
.sponsor-grid {
  display: grid; grid-template-columns: 1fr 1fr; gap: 8px;
  padding: 10px 15px 14px;
}
.sponsor-badge {
  background: rgba(0, 15, 30, 0.55);
  border: 1px solid var(--panel-border);
  border-radius: var(--r-sm);
  padding: 11px 10px;
  display: flex; flex-direction: column; align-items: center; gap: 6px;
  text-align: center;
}
.sponsor-logo-placeholder {
  font-family: var(--font-display);
  font-size: 1.05rem; font-weight: 700;
  letter-spacing: 0.06em;
  opacity: 0.85;
}
.sponsor-label {
  font-size: 0.65rem; color: var(--text-muted); line-height: 1.4;
  text-align: center;
}

/* References list */
.ref-list-full {
  list-style: none; display: flex; flex-direction: column; gap: 14px;
  padding: 4px 0;
}
.ref-list-full li {
  display: flex; gap: 10px; align-items: flex-start;
}
.ref-num {
  font-family: var(--font-mono);
  font-size: 0.72rem; color: var(--accent);
  flex-shrink: 0; min-width: 28px;
  margin-top: 1px;
}
.ref-list-full a { color: var(--text-secondary); font-size: 0.84rem; }
.ref-list-full a:hover { color: var(--accent-hover); text-decoration: underline; }
.ref-note {
  display: block; font-size: 0.74rem; color: var(--text-muted);
  margin-top: 3px; line-height: 1.5;
}

/* ═══════════════════════════════════════════════════════════════
   HELP MODAL — smooth fade
═══════════════════════════════════════════════════════════════ */
#modal-overlay {
  position: fixed; inset: 0; z-index: 60;
  background: rgba(0, 6, 14, 0.76);
  backdrop-filter: blur(5px);
  display: flex; align-items: center; justify-content: center;
  /* Use opacity/pointer-events instead of display toggling */
  opacity: 0; pointer-events: none; visibility: hidden;
  transition: opacity var(--t-mid) ease, visibility var(--t-mid) ease;
}
#modal-overlay.open {
  opacity: 1; pointer-events: auto; visibility: visible;
}

.modal-box {
  width: 500px; max-width: 94vw; max-height: 88vh;
  overflow-y: auto;
  background: rgba(0, 14, 28, 0.98);
  border: 1px solid var(--panel-border-hi);
  border-radius: var(--r-xl);
  backdrop-filter: blur(30px);
  box-shadow: 0 24px 72px rgba(0,0,0,0.65);
  transform: translateY(12px) scale(0.98);
  transition: transform var(--t-mid) var(--ease);
}
#modal-overlay.open .modal-box { transform: translateY(0) scale(1); }
.modal-box::-webkit-scrollbar { width: 4px; }
.modal-box::-webkit-scrollbar-thumb { background: rgba(0,153,196,0.18); border-radius: 4px; }

.modal-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: 20px 24px;
  border-bottom: 1px solid var(--panel-border);
}
.modal-title {
  display: flex; align-items: center; gap: 9px;
  font-family: var(--font-display);
  font-size: 1.25rem; font-weight: 700; color: var(--text-primary);
}
.modal-close {
  width: 30px; height: 30px;
  display: flex; align-items: center; justify-content: center;
  border-radius: var(--r-sm); color: var(--text-muted);
  transition: background var(--t-fast), color var(--t-fast);
}
.modal-close:hover { background: rgba(255,255,255,0.06); color: var(--text-primary); }

.modal-body { padding: 22px 24px; display: flex; flex-direction: column; gap: 22px; }
.modal-section-title {
  font-family: var(--font-display);
  font-size: 0.78rem; font-weight: 700;
  letter-spacing: 0.11em; text-transform: uppercase;
  color: var(--text-muted); margin-bottom: 11px;
}
.modal-text { font-size: 0.87rem; color: var(--text-secondary); line-height: 1.68; margin-bottom: 9px; }

.modal-links { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 5px; }
.modal-link {
  display: inline-flex; align-items: center; gap: 5px;
  padding: 6px 13px;
  border: 1px solid var(--panel-border-hi);
  border-radius: var(--r-sm);
  font-size: 0.81rem; color: var(--accent);
  transition: background var(--t-fast), border-color var(--t-fast);
}
.modal-link:hover { background: var(--accent-dim); border-color: var(--accent); }

/* ═══════════════════════════════════════════════════════════════
   TOUR
═══════════════════════════════════════════════════════════════ */
#tour-overlay {
  position: fixed; inset: 0; z-index: 70;
  pointer-events: none; visibility: hidden; opacity: 0;
  transition: opacity 0.28s ease, visibility 0.28s ease;
}
#tour-overlay.active { visibility: visible; opacity: 1; pointer-events: auto; }
#tour-overlay::before {
  content: ''; position: fixed; inset: 0;
  background: rgba(0, 6, 14, 0.62); z-index: -1;
}

.tour-card {
  position: absolute;
  background: rgba(0, 14, 28, 0.98);
  border: 1px solid var(--panel-border-hi);
  border-radius: var(--r-xl);
  backdrop-filter: blur(30px);
  padding: 34px;
  animation: fadeUp 0.36s var(--ease) both;
  box-shadow: 0 24px 72px rgba(0,0,0,0.65);
}
.tour-centered {
  width: 500px; max-width: 93vw;
  top: 50%; left: 50%;
  transform: translate(-20%, -37%);
}

.tour-card-header {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 24px;
}
.tour-badge {
  padding: 3px 10px;
  background: var(--accent-dim);
  border: 1px solid rgba(0,153,196,0.3);
  border-radius: 100px;
  font-size: 0.68rem; font-weight: 700;
  letter-spacing: 0.15em; text-transform: uppercase;
  color: var(--accent);
}
.tour-step-indicator { font-family: var(--font-mono); font-size: 0.7rem; color: var(--text-muted); }

.tour-orb {
  font-family: var(--font-display);
  font-size: 3rem; color: var(--accent);
  opacity: 0.5; text-align: center;
  margin-bottom: 16px; line-height: 1;
}

.tour-title {
  font-family: var(--font-display);
  font-size: 1.65rem; font-weight: 700;
  line-height: 1.2; margin-bottom: 15px;
  color: var(--text-primary);
}
.tour-body { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.74; margin-bottom: 28px; }
.tour-body p { margin-bottom: 11px; }
.tour-body strong { color: var(--text-primary); }

.tour-load-btn {
  display: inline-flex; align-items: center; gap: 8px;
  margin-top: 12px; padding: 10px 22px;
  background: var(--accent); color: #fff;
  font-size: 0.9rem; font-weight: 600; border-radius: var(--r-md);
  cursor: pointer; border: none;
  transition: background var(--t-fast), transform var(--t-fast);
}
.tour-load-btn:hover { background: var(--accent-hover); transform: translateY(-1px); }

.tour-actions {
  display: flex; align-items: center; gap: 10px;
  border-top: 1px solid var(--panel-border); padding-top: 18px;
}
.tour-no-show {
  display: flex; align-items: center; gap: 6px;
  font-size: 0.75rem; color: var(--text-muted); cursor: pointer; flex: 1;
}
.tour-no-show input { accent-color: var(--accent); cursor: pointer; }
.tour-nav { display: flex; gap: 7px; margin-left: auto; }

.tour-btn-ghost {
  padding: 7px 14px; font-size: 0.78rem; color: var(--text-muted);
  border-radius: var(--r-sm);
  transition: color var(--t-fast), background var(--t-fast);
}
.tour-btn-ghost:hover { color: var(--text-secondary); background: rgba(255,255,255,0.04); }

.tour-btn-sec {
  width: 34px; height: 34px;
  display: flex; align-items: center; justify-content: center;
  border: 1px solid var(--panel-border); border-radius: var(--r-sm);
  color: var(--text-muted); font-size: 0.85rem;
  transition: background var(--t-fast), color var(--t-fast);
}
.tour-btn-sec:hover { background: rgba(255,255,255,0.05); color: var(--text-primary); }

.tour-btn-pri {
  display: flex; align-items: center; gap: 7px;
  padding: 8px 18px;
  background: var(--accent); color: #fff;
  font-size: 0.86rem; font-weight: 600; border-radius: var(--r-sm);
  transition: background var(--t-fast), transform var(--t-fast);
}
.tour-btn-pri:hover { background: var(--accent-hover); transform: translateY(-1px); }

/* Floating popover */
.tour-popover {
  position: absolute; width: 308px;
  background: rgba(0, 14, 28, 0.98);
  border: 1px solid var(--panel-border-hi);
  border-radius: var(--r-lg);
  backdrop-filter: blur(26px);
  padding: 18px 20px;
  display: none; z-index: 2;
  animation: fadeUp 0.28s var(--ease) both;
  box-shadow: 0 12px 40px rgba(0,0,0,0.6);
}
.tour-popover.visible { display: block; }

.pop-arrow {
  position: absolute; width: 11px; height: 11px;
  background: rgba(0, 14, 28, 0.98);
  border: 1px solid var(--panel-border-hi);
  transform: rotate(45deg);
}
.pop-arrow.arrow-left   { left: -6px; top: 18px; border-right: none; border-top: none; }
.pop-arrow.arrow-right  { right: -6px; top: 18px; border-left: none; border-bottom: none; }
.pop-arrow.arrow-top    { top: -6px; left: 22px; border-bottom: none; border-right: none; }
.pop-arrow.arrow-bottom { bottom: -6px; left: 22px; border-top: none; border-left: none; }

.pop-step-indicator { font-family: var(--font-mono); font-size: 0.66rem; color: var(--text-muted); margin-bottom: 9px; }
.pop-title  { font-family: var(--font-display); font-size: 1.08rem; font-weight: 700; color: var(--text-primary); margin-bottom: 9px; }
.pop-body   { font-size: 0.83rem; color: var(--text-secondary); line-height: 1.66; margin-bottom: 15px; }
.pop-actions { display: flex; align-items: center; justify-content: space-between; gap: 8px; }

/* Spotlight */
#tour-spotlight {
  position: absolute;
  border: 2px solid var(--accent);
  border-radius: var(--r-md);
  box-shadow: 0 0 0 4px rgba(0,153,196,0.1), 0 0 24px rgba(0,153,196,0.2);
  pointer-events: none; display: none; z-index: 1;
  transition: all 0.26s var(--ease);
}
#tour-spotlight.visible { display: block; }

/* ═══════════════════════════════════════════════════════════════
   KEYFRAME ANIMATIONS
═══════════════════════════════════════════════════════════════ */
@keyframes fadeUp   { from { opacity: 0; transform: translateY(14px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes fadeLeft { from { opacity: 0; transform: translateX(-14px); } to { opacity: 1; transform: translateX(0); } }
@keyframes fadeRight{ from { opacity: 0; transform: translateX(14px); }  to { opacity: 1; transform: translateX(0); } }

/* ═══════════════════════════════════════════════════════════════
   RESPONSIVE
═══════════════════════════════════════════════════════════════ */
@media (max-width: 900px) {
  #left-panel  { width: 215px; }
  #wiki-panel  { width: 330px; }
  .tb-brand    { display: none; }
}
@media (max-width: 640px) {
  #left-panel  { display: none; }
  #wiki-panel  { width: 100%; }
  .dz-inner    { padding: 34px 22px 28px; }
  #top-bar     { padding: 0 12px; }
  .tb-tooltip  { display: none; }  /* hide tooltips on mobile */
}